<div class="container-fluid py-3">
  <div class="card shadow-sm">
    <div class="card-header">Editar Quiz</div>
    <div class="card-body">
      <?php $form->prepare(); ?>
      <?= $this->form()->openTag($form) ?>
      <?= $this->formHidden($form->get('id')) ?>
      <?= $this->formHidden($form->get('capacitacion_id')) ?>

      <div class="form-group">
        <label><?= $form->get('title')->getLabel() ?></label>
        <?= $this->formElement($form->get('title')) ?>
      </div>

      <div class="form-row">
        <div class="form-group col-md-4">
          <label><?= $form->get('max_attempts')->getLabel() ?></label>
          <?= $this->formElement($form->get('max_attempts')) ?>
        </div>
        <div class="form-group col-md-4">
          <label><?= $form->get('pass_score')->getLabel() ?></label>
          <?= $this->formElement($form->get('pass_score')) ?>
        </div>
        <div class="form-group col-md-4">
          <label><?= $form->get('reward_limit')->getLabel() ?></label>
          <?= $this->formElement($form->get('reward_limit')) ?>
        </div>
      </div>

      <div class="form-group">
        <label><?= $form->get('reward_mode')->getLabel() ?></label>
        <?= $this->formSelect($form->get('reward_mode')->setAttribute('id','reward_mode')) ?>
      </div>

      <div class="form-group reward-points">
        <label><?= $form->get('reward_points')->getLabel() ?></label>
        <?= $this->formElement($form->get('reward_points')) ?>
      </div>

      <div class="form-group reward-product">
        <label><?= $form->get('reward_product_id')->getLabel() ?></label>
        <?= $this->formSelect($form->get('reward_product_id')->setAttribute('id','reward_product_id')) ?>
      </div>

      <?= $this->formSubmit($form->get('submit')) ?>
      <?= $this->form()->closeTag() ?>
    </div>
  </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css">
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
(function(){
  function sync(){
    var mode = document.getElementById('reward_mode');
    var v = mode ? mode.value : 'none';
    var points = document.querySelector('.reward-points');
    var prod   = document.querySelector('.reward-product');
    if(points) points.style.display = (v === 'points') ? '' : 'none';
    if(prod)   prod.style.display = (v === 'product') ? '' : 'none';
  }
  document.addEventListener('DOMContentLoaded', function(){
    if (window.jQuery && jQuery.fn.select2) {
      jQuery('#reward_product_id').select2({ width: '100%' });
    }
    var mode = document.getElementById('reward_mode');
    if (mode) mode.addEventListener('change', sync);
    sync();
  });
})();
</script>
